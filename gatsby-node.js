// eslint-disable-next-line import/no-extraneous-dependencies
const fsExtra = require('fs-extra');

exports.createPages = require('./gatsby/createPages');
exports.onCreateNode = require('./gatsby/onCreateNode');
exports.onCreatePage = require('./gatsby/onCreatePage');

exports.onCreateWebpackConfig = ({ stage, loaders, actions }) => {
  if (stage === 'build-javascript') {
    // Turn off source maps
    actions.setWebpackConfig({
      devtool: false,
    });
  }
  if (stage === 'build-html') {
    actions.setWebpackConfig({
      module: {
        rules: [
          {
            test: /react-darkreader/,
            use: loaders.null(),
          },
        ],
      },
    });
  }
};
